# first view any user 

class UserProfileDetailView(APIView):
    def get(self, request):
        try:
            user_id = request.GET.get('user_id',request.user.id)
            if not user_id:
                return Response(error_(message=const.USER_ID_REQUIRED), status=status.HTTP_200_OK)

            user = UsersUtils.get_user_details(request)
            if not user:
                return Response(error_(message=const.USER_NOT_EXIST), status=status.HTTP_200_OK)
            
            if request.user.id != user.id:
                ip_address = CommonUtils.get_client_ip(request)
                device_id = CommonUtils.get_device_id(request)
                CommonUtils.insert_activity_log(request.user,user,const.PROFILE_VIEWED,ip_address,device_id)
            
            response_data = UsersUtils.get_user_profile_by_action(user,request)
            return Response(success_(response=response_data), status=status.HTTP_200_OK)

        except Exception as e:
            import traceback
            print(traceback.format_exc())
            return Response(error_(message=str(e)),status=status.HTTP_400_BAD_REQUEST)
